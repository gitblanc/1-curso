/**
 * 
 */
package uo.mp.battleship.session;

import uo.mp.battleship.console.ConsoleSessionInteractor;
import uo.mp.battleship.interaction.GameInteractor;
import uo.mp.battleship.interaction.GamePresenter;
import uo.mp.battleship.ranking.GameRanking;
import uo.mp.battleship.util.IO;
import uo.mp.battleship.util.InvalidOptionException;
import uo.mp2021.util.checks.ArgumentChecks;
import uo.mp2021.util.log.SimpleLogger;

/**
 * @author blanc
 *
 */
public class GameSession {
	private GameInteractor interactor;
	private GamePresenter presenter;
	private SessionInteractor session;
	private SimpleLogger logger;
	private GameRanking ranking;
	
	public void run(){
		session.askUserName();
		do {
			selectOption(session.askNextOption());
		}
		while(session.askNextOption() != 0);
	}
	
	private void selectOption(int option) {
		switch(option) {
		case 1:
			playNewGame();
			break;
		case 2:
			session.showPersonalRanking(ranking);
			break;
		case 3:
			session.showRanking(null);
			break;
		default:
			throw new InvalidOptionException("Opción no válida, escoja otra");
		}
	}

	private void playNewGame() {
		session.askGameLevel();//dificultad
		session.askDebugMode();//modo depuración
		session.doYouWantToRegisterYourScore();//guardar la puntuacion
	}

	/**
	 * @param presenter the presenter to set
	 */
	public void setGamePresenter(GamePresenter presenter) {
		ArgumentChecks.isTrue(presenter != null);
		this.presenter = presenter;
	}

	/**
	 * @param interactor the interactor to set
	 */
	public void setGameInteractor(GameInteractor interactor) {
		ArgumentChecks.isTrue(interactor != null);
		this.interactor = interactor;
	}

	/**
	 * @param session the session to set
	 */
	public void setSessionInteractor(SessionInteractor session) {
		ArgumentChecks.isTrue(session != null);
		this.session = session;
	}

	/**
	 * @param logger the logger to set
	 */
	public void setLogger(SimpleLogger logger) {
		ArgumentChecks.isTrue(logger != null);
		this.logger = logger;
	}

	/**
	 * @param ranking the ranking to set
	 */
	public void setGameRanking(GameRanking ranking) {
		ArgumentChecks.isTrue(ranking != null);
		this.ranking = ranking;
	}
	
	
	
	
	
	
}
